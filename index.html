<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baccarat Gemblong88</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #2e8b57;
            color: #fff;
        }
        .container {
            margin-top: 50px;
        }
        .bet-buttons {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: #2e8b57;
            padding: 10px 0;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .bet-button {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            border: none;
            color: #fff;
            background-color: #4CAF50;
        }
        .hands-container {
            display: flex;
            justify-content: center;
            gap: 60px;
            margin-top: 20px;
        }
        .hand {
            font-size: 20px;
            position: relative;
            width: 150px;
        }
        .card-images {
            display: flex;
            position: relative;
            justify-content: center;
            margin-top: 10px;
            gap: 10px;
        }
        .card-image-container {
            position: relative;
        }
        .card-image {
            width: 60px;
            height: auto;
            transition: transform 0.5s ease;
        }
        .cumulative-score {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        #result {
            margin: 20px;
            font-size: 22px;
            font-weight: bold;
        }
        .coin-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        .coin {
            padding: 10px;
            cursor: pointer;
            font-size: 16px;
            color: #fff;
            background-color: #4CAF50;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #balance, #bet-amount {
            font-size: 22px;
            font-weight: bold;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Baccarat Gemblong88</h1>
        <div id="result"></div>
        <div class="hands-container">
            <div class="hand">
                <div id="player-hand">Pemain:</div>
                <div id="player-cards" class="card-images"></div>
                <div id="player-cumulative-score" class="cumulative-score">Skor: 0</div>
            </div>
            <div class="hand">
                <div id="banker-hand">Banker:</div>
                <div id="banker-cards" class="card-images"></div>
                <div id="banker-cumulative-score" class="cumulative-score">Skor: 0</div>
            </div>
        </div>
        <div class="coin-container">
            <button class="coin" onclick="selectBetAmount(2000)">2K</button>
            <button class="coin" onclick="selectBetAmount(5000)">5K</button>
            <button class="coin" onclick="selectBetAmount(10000)">10K</button>
            <button class="coin" onclick="selectBetAmount(20000)">20K</button>
            <button class="coin" onclick="selectBetAmount(50000)">50K</button>
            <button class="coin" onclick="selectBetAmount(100000)">100K</button>
        </div>
    </div>

    <div class="bet-buttons">
        <button class="bet-button" onclick="placeBet('Player')">Taruhan pada Pemain</button>
        <button class="bet-button" onclick="placeBet('Tie')">Taruhan pada Seri</button>
        <button class="bet-button" onclick="placeBet('Banker')">Taruhan pada Banker</button>
    </div>

    <div id="balance">Saldo: Rp 10000</div>
    <div id="bet-amount">Taruhan: Rp 0</div>

    <script>
        let deck = [];
        let playerHand = [];
        let bankerHand = [];
        let playerBet = '';
        let balance = 10000; // initial balance
        let betAmount = 0; // selected bet amount

        function initializeDeck() {
            deck = [];
            const suits = ['hearts', 'diamonds', 'clubs', 'spades'];
            const values = [
                { name: 'ace', value: 1 }, { name: '2', value: 2 }, { name: '3', value: 3 },
                { name: '4', value: 4 }, { name: '5', value: 5 }, { name: '6', value: 6 },
                { name: '7', value: 7 }, { name: '8', value: 8 }, { name: '9', value: 9 },
                { name: '10', value: 10 }, { name: 'jack', value: 10 },
                { name: 'queen', value: 10 }, { name: 'king', value: 10 }
            ];
            for (let suit of suits) {
                for (let value of values) {
                    deck.push({
                        value: value.value,
                        suit: suit,
                        image: `cards/${value.name}_of_${suit}.png`
                    });
                }
            }
            shuffleDeck();
        }

        function shuffleDeck() {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }

        function selectBetAmount(amount) {
            betAmount = amount;
            document.getElementById("bet-amount").innerHTML = `Taruhan: Rp ${amount}`;
            document.getElementById("result").innerHTML = ''; // Clear result when selecting a new bet
        }

        function placeBet(bet) {
            if (betAmount > balance) {
                alert("Saldo tidak mencukupi untuk taruhan ini.");
                return;
            }
            playerBet = bet;
            balance -= betAmount;
            updateBalanceDisplay();
            startGame(betAmount);
        }

        function updateBalanceDisplay() {
            document.getElementById("balance").innerHTML = `Saldo: Rp ${balance}`;
        }

        function startGame(betAmount) {
            initializeDeck();
            playerHand = [];
            bankerHand = [];

            document.getElementById("player-cards").innerHTML = '';
            document.getElementById("banker-cards").innerHTML = '';
            document.getElementById("result").innerHTML = '';
            document.getElementById("player-cumulative-score").innerHTML = 'Skor: 0';
            document.getElementById("banker-cumulative-score").innerHTML = 'Skor: 0';

            drawAndRevealCard(playerHand, "player-cards", "player-cumulative-score");
            setTimeout(() => drawAndRevealCard(bankerHand, "banker-cards", "banker-cumulative-score"), 1000);
            setTimeout(() => drawAndRevealCard(playerHand, "player-cards", "player-cumulative-score"), 2000);
            setTimeout(() => drawAndRevealCard(bankerHand, "banker-cards", "banker-cumulative-score"), 3000);
            setTimeout(() => {
                const playerScore = calculateScore(playerHand);
                const bankerScore = calculateScore(bankerHand);

                let result = determineWinner(playerScore, bankerScore);
                document.getElementById("result").innerHTML = result;

                // Tambah saldo berdasarkan hasil
                if (result === 'Pemain menang' && playerBet === 'Player') {
                    balance += betAmount * 2; // Pemain menang
                } else if (result === 'Banker menang' && playerBet === 'Banker') {
                    balance += betAmount * 1.95; // Banker menang
                } else if (result === 'Seri' && playerBet === 'Tie') {
                    balance += betAmount * 8; // Seri
                } else if (result === 'Seri' && (playerBet === 'Player' || playerBet === 'Banker')) {
                    balance += betAmount; // Kembalikan saldo jika hasilnya Seri dan taruhan bukan di Tie
                }
    
                updateBalanceDisplay();
            }, 4000);

        }

        function drawAndRevealCard(hand, elementId, scoreId) {
            const card = drawCard();
            hand.push(card);

            const cardContainer = document.createElement("div");
            cardContainer.className = "card-image-container";

            const cardImage = document.createElement("img");
            cardImage.src = card.image;
            cardImage.className = "card-image";
            cardContainer.appendChild(cardImage);
            document.getElementById(elementId).appendChild(cardContainer);

            setTimeout(() => {
                const cumulativeScore = calculateScore(hand);
                document.getElementById(scoreId).innerHTML = `Skor: ${cumulativeScore}`;
            }, 500);
        }

        function drawCard() {
            return deck.pop();
        }

        function calculateScore(hand) {
            let total = hand.reduce((sum, card) => sum + card.value, 0);
            return total % 10;
        }

        function determineWinner(playerScore, bankerScore) {
            if (playerScore > bankerScore) {
                return 'Pemain menang';
            } else if (bankerScore > playerScore) {
                return 'Banker menang';
            } else {
                return 'Seri';
            }
        }
    </script>
</body>
</html>

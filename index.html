<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baccarat Gemblong88</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #2e8b57;
            color: #fff;
        }
        .container {
            margin-top: 50px;
        }
        .bet-buttons {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: #2e8b57;
            padding: 10px 0;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .bet-button {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            border: none;
            color: #fff;
            background-color: #4CAF50;
        }
        .hands-container {
            display: flex;
            justify-content: center;
            gap: 60px;
            margin-top: 20px;
        }
        .hand {
            font-size: 20px;
            position: relative;
            width: 200px;
        }
        .card-images {
            display: flex;
            position: relative;
            justify-content: center;
            margin-top: 10px;
            gap: 10px;
        }
        .card-image {
            width: 60px;
            height: auto;
            transition: transform 0.5s ease;
        }
        .cumulative-score {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        #result {
            margin: 20px;
            font-size: 22px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Baccarat Gemblong88</h1>
        <div id="result"></div>
        <div class="hands-container">
            <div class="hand">
                <div id="player-hand">Pemain:</div>
                <div id="player-cards" class="card-images"></div>
                <div id="player-cumulative-score" class="cumulative-score">Skor: 0</div>
            </div>
            <div class="hand">
                <div id="banker-hand">Banker:</div>
                <div id="banker-cards" class="card-images"></div>
                <div id="banker-cumulative-score" class="cumulative-score">Skor: 0</div>
            </div>
        </div>
    </div>

    <div class="bet-buttons">
        <button class="bet-button" onclick="placeBet('Player')">Taruhan pada Pemain</button>
        <button class="bet-button" onclick="placeBet('Tie')">Taruhan pada Seri</button>
        <button class="bet-button" onclick="placeBet('Banker')">Taruhan pada Banker</button>
    </div>

    <script>
        let deck = [];
        let playerHand = [];
        let bankerHand = [];
        let playerBet = '';

        function initializeDeck() {
            deck = [];
            const suits = ['hearts', 'diamonds', 'clubs', 'spades'];
            const values = [
                { name: 'ace', value: 1 }, { name: '2', value: 2 }, { name: '3', value: 3 },
                { name: '4', value: 4 }, { name: '5', value: 5 }, { name: '6', value: 6 },
                { name: '7', value: 7 }, { name: '8', value: 8 }, { name: '9', value: 9 },
                { name: '10', value: 10 }, { name: 'jack', value: 10 },
                { name: 'queen', value: 10 }, { name: 'king', value: 10 }
            ];
            for (let suit of suits) {
                for (let value of values) {
                    deck.push({
                        value: value.value,
                        suit: suit,
                        image: `cards/${value.name}_of_${suit}.png`
                    });
                }
            }
            shuffleDeck();
        }

        function shuffleDeck() {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }

        function placeBet(bet) {
            playerBet = bet;
            startGame();
        }

        function startGame() {
            initializeDeck();
            playerHand = [];
            bankerHand = [];

            document.getElementById("player-cards").innerHTML = '';
            document.getElementById("banker-cards").innerHTML = '';
            document.getElementById("result").innerHTML = '';
            document.getElementById("player-cumulative-score").innerHTML = 'Skor: 0';
            document.getElementById("banker-cumulative-score").innerHTML = 'Skor: 0';

            // Draw initial two cards for both player and banker
            drawAndRevealCard(playerHand, "player-cards", "player-cumulative-score");
            setTimeout(() => drawAndRevealCard(bankerHand, "banker-cards", "banker-cumulative-score"), 1000);
            setTimeout(() => drawAndRevealCard(playerHand, "player-cards", "player-cumulative-score"), 2000);
            setTimeout(() => drawAndRevealCard(bankerHand, "banker-cards", "banker-cumulative-score"), 3000);

            // Check if a third card is needed after a delay
            setTimeout(() => {
                const playerScore = calculateScore(playerHand);
                const bankerScore = calculateScore(bankerHand);

                // Player draws a third card if score is 5 or less
                if (playerScore <= 5) {
                    setTimeout(() => drawAndRevealCard(playerHand, "player-cards", "player-cumulative-score"), 4000);
                }
                // Banker draws a third card based on specific rules
                if (bankerScore <= 5 && playerHand.length === 2) {
                    setTimeout(() => drawAndRevealCard(bankerHand, "banker-cards", "banker-cumulative-score"), 5000);
                }

                // Show result after all cards are revealed
                setTimeout(() => {
                    const finalPlayerScore = calculateScore(playerHand);
                    const finalBankerScore = calculateScore(bankerHand);

                    let result = determineWinner(finalPlayerScore, finalBankerScore);
                    document.getElementById("result").innerHTML = result;
                }, 6000);
            }, 3500);
        }

        function drawAndRevealCard(hand, elementId, scoreId) {
            const card = drawCard();
            hand.push(card);

            // Create an img element for the card
            const cardImage = document.createElement("img");
            cardImage.src = card.image;
            cardImage.className = "card-image";
            document.getElementById(elementId).appendChild(cardImage);

            // Delay score update to show cumulative score after card appears
            setTimeout(() => {
                const cumulativeScore = calculateScore(hand);
                document.getElementById(scoreId).innerHTML = `Skor: ${cumulativeScore}`;
            }, 500);
        }

        function drawCard() {
            return deck.pop();
        }

        function calculateScore(hand) {
            let total = hand.reduce((sum, card) => sum + card.value, 0);
            return total % 10;
        }

        function determineWinner(playerScore, bankerScore) {
            if (playerScore > bankerScore) {
                return 'Pemain menang';
            } else if (bankerScore > playerScore) {
                return 'Banker menang';
            } else {
                return 'Seri';
            }
        }
    </script>
</body>
</html>
